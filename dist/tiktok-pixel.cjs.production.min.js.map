{"version":3,"file":"tiktok-pixel.cjs.production.min.js","sources":["../src/index.tsx"],"sourcesContent":["let debug = false;\nlet initialized = false;\n\nconst warn = (...args: any) => {\n  if (!debug) {\n    return;\n  }\n  console.info(...['[tiktok-pixel]'].concat(args));\n};\n\nconst verifyInit = () => {\n  if (!initialized) {\n    warn(\n      'Pixel not initialized before using call tiktokPixel.init with required params'\n    );\n  }\n  return initialized;\n};\n\nconst log = (...args: any) => {\n  if (!debug) {\n    return;\n  }\n  // eslint-disable-next-line no-console\n  console.info(...['[tiktok-pixel]'].concat(args));\n};\n\nconst loadLibrary = (\n  w: Window,\n  t: string,\n  pixelId: string,\n  advancedMatching: AdvancedMatching,\n  options: DebugOptions\n) => {\n  (w as any).TiktokAnalyticsObject = t;\n  var ttq = ((w as any)[t] = (w as any)[t] || []);\n  ttq.methods = [\n    'page',\n    'track',\n    'identify',\n    'instances',\n    'debug',\n    'on',\n    'off',\n    'once',\n    'ready',\n    'alias',\n    'group',\n    'enableCookie',\n    'disableCookie',\n  ];\n  ttq.setAndDefer = function(t: any, e: any) {\n    t[e] = function() {\n      t.push([e].concat(Array.prototype.slice.call(arguments, 0)));\n    };\n  };\n\n  for (var i = 0; i < ttq.methods.length; i++)\n    ttq.setAndDefer(ttq, ttq.methods[i]);\n  ttq.instance = function(t: any) {\n    for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)\n      ttq.setAndDefer(e, ttq.methods[n]);\n    return e;\n  };\n  ttq.load = function(e: string, n: any) {\n    var i = 'https://analytics.tiktok.com/i18n/pixel/events.js';\n    ttq._i = ttq._i || {};\n    ttq._i[e] = [];\n    ttq._i[e]._u = i;\n    ttq._t = ttq._t || {};\n    ttq._t[e] = +new Date();\n    ttq._o = ttq._o || {};\n    ttq._o[e] = n || {};\n    var o = document.createElement('script');\n    o.type = 'text/javascript';\n    o.async = !0;\n    o.src = i + '?sdkid=' + e + '&lib=' + t;\n    var a = document.getElementsByTagName('script')[0];\n    a?.parentNode?.insertBefore(o, a);\n  };\n  if (!pixelId) {\n    warn('Please insert pixel id for initializing');\n  } else {\n    ttq.load(pixelId);\n    ttq.identify(advancedMatching);\n    ttq.page();\n    initialized = true;\n    debug = options.debug!;\n  }\n};\n\nconst defaultOptions: DebugOptions = {\n  debug: false,\n};\n\nconst TiktokPixel = {\n  async init(\n    pixelId: string,\n    advancedMatching: AdvancedMatching = {},\n    options = defaultOptions\n  ) {\n    initialized = typeof window !== 'undefined' && !!(window as any).ttq;\n    if (!initialized) {\n      loadLibrary(window, 'ttq', pixelId, advancedMatching, options);\n    }\n  },\n  pageView() {\n    const ttq = getLibrary();\n    ttq.page();\n  },\n\n  track(event: TiktokEvent, data?: TiktokParams, options: DebugOptions = {}) {\n    if (!verifyInit()) {\n      return;\n    }\n\n    if (!event) {\n      log(`please specificy an event name`);\n    }\n\n    const ttq = getLibrary();\n\n    ttq.track(event, data, options);\n\n    if (debug) {\n      log(`called ttq.track('${event}')`, data, options);\n\n      if (data) {\n        log('with data', data, options);\n      }\n    }\n  },\n};\n\nconst getLibrary = () => {\n  return (window as any).ttq;\n};\n\nexport default TiktokPixel;\n"],"names":["debug","initialized","warn","args","console","info","concat","log","loadLibrary","w","t","pixelId","advancedMatching","options","TiktokAnalyticsObject","ttq","methods","setAndDefer","e","push","Array","prototype","slice","call","arguments","i","length","instance","_i","n","load","_u","_t","Date","_o","o","document","createElement","type","async","src","a","getElementsByTagName","parentNode","_a$parentNode","insertBefore","identify","page","defaultOptions","TiktokPixel","init","window","pageView","getLibrary","track","event","data"],"mappings":"soNAAA,IAAIA,GAAQ,EACRC,GAAc,EAEZC,EAAO,iBACX,GAAKF,EAAL,CAEC,2BAHcG,2BAAAA,qBAIfC,SAAQC,aAAQ,CAAC,kBAAkBC,OAAOH,MAYtCI,EAAM,iBACV,GAAKP,EAAL,CAGA,2BAJcG,2BAAAA,qBAKdC,SAAQC,aAAQ,CAAC,kBAAkBC,OAAOH,MAGtCK,EAAc,SAClBC,EACAC,EACAC,EACAC,EACAC,GAECJ,EAAUK,sBAAwBJ,EACnC,IAAIK,EAAQN,EAAUC,GAAMD,EAAUC,IAAM,GAC5CK,EAAIC,QAAU,CACZ,OACA,QACA,WACA,YACA,QACA,KACA,MACA,OACA,QACA,QACA,QACA,eACA,iBAEFD,EAAIE,YAAc,SAASP,EAAQQ,GACjCR,EAAEQ,GAAK,WACLR,EAAES,KAAK,CAACD,GAAGZ,OAAOc,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,OAI5D,IAAK,IAAIC,EAAI,EAAGA,EAAIV,EAAIC,QAAQU,OAAQD,IACtCV,EAAIE,YAAYF,EAAKA,EAAIC,QAAQS,IACnCV,EAAIY,SAAW,SAASjB,GACtB,IAAK,IAAIQ,EAAIH,EAAIa,GAAGlB,IAAM,GAAImB,EAAI,EAAGA,EAAId,EAAIC,QAAQU,OAAQG,IAC3Dd,EAAIE,YAAYC,EAAGH,EAAIC,QAAQa,IACjC,OAAOX,GAETH,EAAIe,KAAO,SAASZ,EAAWW,SACzBJ,EAAI,oDACRV,EAAIa,GAAKb,EAAIa,IAAM,GACnBb,EAAIa,GAAGV,GAAK,GACZH,EAAIa,GAAGV,GAAGa,GAAKN,EACfV,EAAIiB,GAAKjB,EAAIiB,IAAM,GACnBjB,EAAIiB,GAAGd,IAAM,IAAIe,KACjBlB,EAAImB,GAAKnB,EAAImB,IAAM,GACnBnB,EAAImB,GAAGhB,GAAKW,GAAK,GACjB,IAAIM,EAAIC,SAASC,cAAc,UAC/BF,EAAEG,KAAO,kBACTH,EAAEI,OAAQ,EACVJ,EAAEK,IAAMf,EAAI,UAAYP,EAAI,QAAUR,EACtC,IAAI+B,EAAIL,SAASM,qBAAqB,UAAU,SAChDD,YAAAA,EAAGE,aAAHC,EAAeC,aAAaV,EAAGM,IAE5B9B,GAGHI,EAAIe,KAAKnB,GACTI,EAAI+B,SAASlC,GACbG,EAAIgC,OACJ9C,GAAc,EACdD,EAAQa,EAAQb,OANhBE,EAAK,4CAUH8C,EAA+B,CACnChD,OAAO,GAGHiD,EAAc,CACZC,cACJvC,EACAC,EACAC,6GADAD,IAAAA,EAAqC,aACrCC,IAAAA,EAAUmC,IAEV/C,EAAgC,oBAAXkD,UAA6BA,OAAepC,MAE/DP,EAAY2C,OAAQ,MAAOxC,EAASC,EAAkBC,GACvD,OAAA,UAAA,iNAEHuC,oBACcC,IACRN,QAGNO,eAAMC,EAAoBC,EAAqB3C,YAAAA,IAAAA,EAAwB,IApGlEZ,GACHC,EACE,iFAGGD,IAoGAsD,GACHhD,oCAGU8C,IAERC,MAAMC,EAAOC,EAAM3C,GAEnBb,IACFO,uBAAyBgD,OAAWC,EAAM3C,GAEtC2C,GACFjD,EAAI,YAAaiD,EAAM3C,OAMzBwC,EAAa,WACjB,OAAQF,OAAepC"}